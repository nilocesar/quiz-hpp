async function getDocumentsOrderedByField(e,n){try{var r=await e.orderBy(n,"desc").get();if(r.empty)return console.log("No matching documents."),[];let o=[];return r.forEach(e=>{o.push({id:e.id,data:e.data()})}),o}catch(e){return console.error("Error retrieving documents: ",e),[]}}function updateIfGreater(o,n,r){try{o.get().then(e=>{e.exists?(console.log("update",o),o.update({...n,...r}).then(()=>{console.log("Document successfully update!")}).catch(e=>{console.error("Error update: ",e)})):(console.log("set",o),o.set({...n,...r}).then(()=>{console.log("Document successfully written!")}).catch(e=>{console.error("Error writing document: ",e)}))}).catch(e=>{console.log("Error set:",e)})}catch(e){console.error("Erro ao adicionar ou atualizar documento: ",e)}}function listenToUpdates(e,o){let n=!0;e.onSnapshot(e=>{n?n=!1:e.docChanges().forEach(e=>{"added"===e.type&&(console.log("New document: ",e.doc.data()),o(e)),"modified"===e.type&&(console.log("Modified document: ",e.doc.data()),o(e))})},e=>{console.log("Encountered error: "+e)})}function addOrUpdateDocument(o,n){try{o.get().then(e=>{e.exists?(console.log("update",o),o.update({name:n.name,email:n.email,empresa:n.empresa,informativo:n.informativo,uid:n.uid}).then(()=>{console.log("Document successfully update!")}).catch(e=>{console.error("Error update: ",e)})):(console.log("set",o),o.set({name:n.name,email:n.email,empresa:n.empresa,informativo:n.informativo,uid:n.uid}).then(()=>{console.log("Document successfully written!")}).catch(e=>{console.error("Error writing document: ",e)}))}).catch(e=>{console.log("Error set:",e)})}catch(e){console.error("Erro ao adicionar ou atualizar documento: ",e)}}window.firebaseConfig={apiKey:"AIzaSyCkQDk-WuixIbfy6Jo2ov2YyaJCqaT68u4",authDomain:"astrazeneca-v1.firebaseapp.com",projectId:"astrazeneca-v1",storageBucket:"astrazeneca-v1.firebasestorage.app",messagingSenderId:"877335724875",appId:"1:877335724875:web:a40471cd5e082f2ba9dece",measurementId:"G-30E4TTNSQZ"},window.initFirebase=!1,$(document).ready(function(){var e;window.initFirebase||(e=firebase.initializeApp(window.firebaseConfig),window.db=e.firestore(),window.collectionDB=window.db.collection("usuarios"),window.initFirebase=!0,console.log("confirmado",window.collectionDB))}),bridge.handlerFormDB=function(e){addOrUpdateDocument(window.collectionDB.doc(e.email),e)},bridge.handlerGameDB=function(e,o){updateIfGreater(window.collectionDB.doc(e.email),e,o)},bridge.listRankingDB=function(o){getDocumentsOrderedByField(window.collectionDB,"maior").then(e=>{console.log("Documents ordered by field in descending order:"),o(e)}).catch(e=>{console.error("Error in getDocumentsOrderedByField: ",e)})},bridge.handlerSnapshotFormDB=function(e){listenToUpdates(window.collectionDB,e)};
//# sourceMappingURL=useFirebase.js.map
