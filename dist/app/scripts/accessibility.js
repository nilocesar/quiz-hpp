function createAriaPageInit(){var e=navigate.currentScreen.index+1,t=navigate.currentScreen.pages.length;1<t&&addAlert(1==e?`Carregamento finalizado! Você está na página ${e} de ${t}. Para navegar no treinamento utilize apenas o TAB.`:`Carregamento finalizado! Você está na página ${e} de ${t}.`)}function hiddenElementesFromReader(e){$("*").each(function(){$(this)!=$(e)&&($(this).attr("aria-hidden","true"),$(this).attr("tabindex","-1"))})}function controlAcessibilityModal(){$("[data-modal]").each(function(e,t){$(t).on("click",function(){console.log("open modal: "+$(this).attr("data-modal")),openModal($($(this).attr("data-modal")))})}),$("*").focusin(function(){$(this).hasClass("modal-close")&&(console.log("close modal"),$(".modal").css("display","none"),closeModal())}),$(window).keyup(function(e){$("body").trigger("alertAccessibility")})}function openModal(e){$("body").trigger("hide-header"),addAlert("Janela de conteúdo aberta.");var n={ind:99999999,item:null,last:0,st:!1};$("body").attr("tabIndexModal",document.activeElement.tabIndex),e.find(".modal-close").attr("tabindex",-1),e.find("*").each(function(e,t){-1<parseInt($(t).attr("tabindex"))&&(n.last=parseInt($(t).attr("tabindex"))+1,0==n.st)&&(n.ind=$(t).attr("tabindex"),n.item=$(t),n.st=!0)}),e.find(".modal-close").attr("tabindex",n.last),e.find(".modal-close").attr("aria-label","Fechar modal."),n.item.focus()}function closeModal(){$("body").trigger("show-header"),addAlert("Janela de conteúdo fechada.");var t=parseInt($("body").attr("tabIndexModal"));document.activeElement.tabIndex=t,window.keyToTabActive&&$("*").each(function(){var e=parseInt($(this).attr("tabindex"));t==e&&$(this).focus()})}function controlNavWereTab(){$(window).keyup(function(e){37!=e.which&&38!=e.which||$.tabPrev(),39!=e.which&&40!=e.which||($.tabNext(),window.keyToTabActive=!0)})}function fixTabIndexInComponents(){$("button").find("*").each(function(){$(this).attr("tabindex","-1")}),$("a").find("*").each(function(){$(this).attr("tabindex","-1")})}function onePageTabIndexFix(){$("*").each(function(){1!=parseInt($(this).attr("tabindex"))||$(this).hasClass("modal-close")||$(this).focus()})}function addAlert(e){removeOldAlert();var t=document.createElement("div"),e=(t.setAttribute("role","alert"),t.setAttribute("id","alert"),document.createTextNode(e));t.appendChild(e),document.body.appendChild(t),$("#alert").css("opacity","0"),setTimeout(function(){removeOldAlert()},4e3)}function removeOldAlert(){var e=document.getElementById("alert");e&&document.body.removeChild(e)}$(document).ready(function(){addAlert("Aguarde, carregando!")}),events.on("ready",function(){setTimeout(function(){createAriaPageInit(),onePageTabIndexFix(),fixTabIndexInComponents(),controlAcessibilityModal(),controlNavWereTab()},1e3)}),$("body").on("hide-header",function(){}),$("body").on("show-header",function(){$("video").each(function(){$(this).get(0).pause()})}),$("body").on("modal-open",function(e,t){openModal(t)}),$("body").on("modal-close",function(e,t){closeModal()}),function(r){"use strict";function e(e){var e=r(e),t=r(":focus"),n=0;1===t.length&&(t=e.index(t))+1<e.length&&(n=t+1),e.eq(n).focus()}function t(e){var e=r(e),t=r(":focus"),n=e.length-1;1===t.length&&0<(t=e.index(t))&&(n=t-1),e.eq(n).focus()}function a(e){var t,n,a,o=e.nodeName.toLowerCase(),i=!isNaN(r.attr(e,"tabindex"));return"area"===o?(n=(t=e.parentNode).name,!(!e.href||!n||"map"!==t.nodeName.toLowerCase()||!(a=r("img[usemap=#"+n+"]")[0]))&&d(a)):(/^(input|select|textarea|button|object)$/.test(o)?!e.disabled:"a"===o&&e.href||i)&&d(e);function d(e){return r.expr.filters.visible(e)&&!r(e).parents().addBack().filter(function(){return"hidden"===r.css(this,"visibility")}).length}}r.focusNext=function(){e(":focusable")},r.focusPrev=function(){t(":focusable")},r.tabNext=function(){e(":tabbable")},r.tabPrev=function(){t(":tabbable")},r.extend(r.expr[":"],{data:r.expr.createPseudo?r.expr.createPseudo(function(t){return function(e){return!!r.data(e,t)}}):function(e,t,n){return!!r.data(e,n[3])},focusable:function(e){return a(e,isNaN(r.attr(e,"tabindex")))},tabbable:function(e){var t=r.attr(e,"tabindex"),n=isNaN(t);return(n||0<=t)&&a(e)}})}(jQuery);
//# sourceMappingURL=accessibility.js.map
